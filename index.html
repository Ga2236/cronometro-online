<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=divice-width,initial=scale1.0">
<link rel="stylesheet" href="style.css" media="screen">
<title>Cronometo online</title>
</head>
<body>
    <div>
        <input type="date" value="2023-01-01"/>
        <button class="start" onclick="start()">Vai</button>
        <button class="start stop"onclick="stop()">Resetar</button>
    </div>
    <h1>ðŸ˜’</h1>


<script>
    const second = 1000;
    const minute = 60 * second;
    const hour = 60 * minute;
    const day = 24 * hour;

    let total;
    let finalDate;
    let intervalId;

    if (localStorage.getItem("timer")) {
        finalDate = localStorage.getItem("timer");
        intervalId= setInterval(timer, 1000);

    }

    function start() {
        const date = document.querySelector("input").value;
        finalDate = new Date(date).getTime();
        localStorage.setItem("timer", finalDate);
        intervalId= setInterval(timer, 1000);
    }

    function timer() {
        let now = new Date().getTime();
        total = finalDate - now;
        const days = Math.floor(total / day);
        const hours = Math.floor((total % hour) / minute) + 3;
        const minutes = Math.floor((total % day) / hour);
        const seconds = Math.floor((total % minute) / second);

        document.querySelector("h1").innerHTML = `${days} d ${hours} h ${minutes} m ${seconds}`;        
    }

    function stop(){
        document.querySelector("h1").innerText = 'ðŸ˜’';
        clearInterval(intervalId);
        localStorage.removeItem("timer");
    }
    function helo(){
        document.querySelector("h1").innerText = new Date().getTime();

    }
</script>
</body>
</html>